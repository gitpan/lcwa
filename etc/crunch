#!/sw/bin/perl
##
##  crunch -- crunch a Perl script
##  Copyright (c) Ralf S. Engelschall, <rse@engelschall.com>
##
##  Usage: crunch <file >file
##

$readme = $ARGV[0];

$first = <STDIN>;
print $first;
print "\n";
print "## THIS PROGRAM WAS AUTOMATICALLY COMPRESSED!\n";
print "## DO NOT EDIT THIS FILE! CHANGE THE SOURCES!\n";
print "\n";
open(FP, "<$readme");
while (<FP>) {
	print "##  $_";
}
close(FP);
print "\n";

while (<STDIN>) {
	s|^\s*#+\s+.*$||;
	s|^\s*$||;
	s|^##EOF##$||;
	print;
}

##EOF##
